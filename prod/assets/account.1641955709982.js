var v=Object.defineProperty;var C=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var S=(e,t,s)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,F=(e,t)=>{for(var s in t||(t={}))V.call(t,s)&&S(e,s,t[s]);if(C)for(var s of C(t))B.call(t,s)&&S(e,s,t[s]);return e};import{i as N,K as R,P as T,a2 as U,m as j,o as q,L as x,t as A,r as a,S as D,F as n,b as L,I as K,D as o,x as k,y as z,C as I,B as b,k as E}from"./vendor.1641955709982.js";import{_ as H,u as M,f as G,S as P,J,K as O}from"./index.1641955709982.js";const Q=["admin"],W=["btn.add","btn.del","btn.edit","btn.link"],Y="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1813762643,1914315241&fm=26&gp=0.jpg",X=["common"],Z=["btn.add","btn.link"],ee="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=317673774,2961727727&fm=26&gp=0.jpg";const te=N({name:"loginAccount",setup(){const{t:e}=R(),{proxy:t}=E(),s=M(),f=T(),y=U(),c=j({isShowPassword:!1,ruleForm:{userName:"",password:"",code:""},loading:{signIn:!1},captcha:""});q(()=>{h()});const h=()=>{c.captcha=`/cstmr-manager/captcha/kaptcha.jpg?${Date.now()}`},d=x(()=>G(new Date)),g=async()=>{c.loading.signIn=!0;let u=[],r=[],l="";c.ruleForm.userName==="admin"?(u=Q,r=W,l=Y):(u=X,r=Z,l=ee);const m={userName:c.ruleForm.userName,photo:l,time:new Date().getTime(),roles:u,authBtnList:r};P.set("token",Math.random().toString(36).substr(0)),P.set("userInfo",m),s.dispatch("userInfos/setUserInfos",m),s.state.themeConfig.themeConfig.isRequestRoutes?(await O(),i()):(await J(),i())},i=()=>{var r,l,m,w;let u=d.value;((r=f.query)==null?void 0:r.redirect)?y.push({path:(l=f.query)==null?void 0:l.redirect,query:Object.keys((m=f.query)==null?void 0:m.params).length>0?JSON.parse((w=f.query)==null?void 0:w.params):""}):y.push("/"),setTimeout(()=>{c.loading.signIn=!0;const _=e("message.signInText");L.success(`${u}\uFF0C${_}`),t.mittBus.emit("onSignInClick")},300)};return F({currentTime:d,changeCaptcha:h,onSignIn:g},A(c))}}),oe={class:"login-content-code"};function ne(e,t,s,f,y,c){const h=a("elementUser"),d=a("el-icon"),g=a("el-input"),i=a("el-form-item"),u=a("elementUnlock"),r=a("elementPosition"),l=a("el-col"),m=a("el-image"),w=a("el-row"),_=a("el-button"),$=a("el-form");return K(),D($,{class:"login-content-form"},{default:n(()=>[o(i,{class:"login-animation-one"},{default:n(()=>[o(g,{type:"text",placeholder:e.$t("message.account.accountPlaceholder1"),modelValue:e.ruleForm.userName,"onUpdate:modelValue":t[0]||(t[0]=p=>e.ruleForm.userName=p),clearable:"",autocomplete:"off"},{prefix:n(()=>[o(d,{class:"el-input__icon"},{default:n(()=>[o(h)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation-two"},{default:n(()=>[o(g,{type:e.isShowPassword?"text":"password",placeholder:e.$t("message.account.accountPlaceholder2"),modelValue:e.ruleForm.password,"onUpdate:modelValue":t[2]||(t[2]=p=>e.ruleForm.password=p),autocomplete:"off"},{prefix:n(()=>[o(d,{class:"el-input__icon"},{default:n(()=>[o(u)]),_:1})]),suffix:n(()=>[k("i",{class:z(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:t[1]||(t[1]=p=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o(i,{class:"login-animation-three"},{default:n(()=>[o(w,{gutter:15},{default:n(()=>[o(l,{span:16},{default:n(()=>[o(g,{type:"text",maxlength:"4",placeholder:e.$t("message.account.accountPlaceholder3"),modelValue:e.ruleForm.code,"onUpdate:modelValue":t[3]||(t[3]=p=>e.ruleForm.code=p),clearable:"",autocomplete:"off"},{prefix:n(()=>[o(d,{class:"el-input__icon"},{default:n(()=>[o(r)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),o(l,{span:8},{default:n(()=>[k("div",oe,[o(m,{class:"login-content-code-img",src:e.captcha,onClick:t[4]||(t[4]=()=>e.changeCaptcha())},null,8,["src"])])]),_:1})]),_:1})]),_:1}),o(i,{class:"login-animation-four"},{default:n(()=>[o(_,{type:"primary",class:"login-content-submit",round:"",onClick:e.onSignIn,loading:e.loading.signIn},{default:n(()=>[k("span",null,I(e.$t("message.account.accountBtnText")),1)]),_:1},8,["onClick","loading"])]),_:1}),o(i,{class:"login-animation-five"},{default:n(()=>[o(_,{type:"text",size:"small"},{default:n(()=>[b(I(e.$t("message.link.one3")),1)]),_:1}),o(_,{type:"text",size:"small"},{default:n(()=>[b(I(e.$t("message.link.two4")),1)]),_:1})]),_:1})]),_:1})}var ie=H(te,[["render",ne],["__scopeId","data-v-62a0ea73"]]);export{ie as default};
